:root{
  --primary:#f7d74f;
  --primary-dark:#d4b800;
  --text:#0f172a;
  --muted:#6b7280;
  --border:#e5e7eb;
  --surface:#ffffff;
}

$radius:12px;
$shadow:0 4px 16px rgba(0,0,0,.05);

.barberrecorda,
.barberrecorda *{ box-sizing:border-box; }

.barberrecorda{
  background:var(--surface);
  border-radius:$radius;
  box-shadow:$shadow;
  padding:24px;
  display:flex; flex-direction:column; gap:18px;

  /* header */
  &__titleWrap{display:grid;gap:4px}
  &__title{margin:0;color:var(--text);font-size:20px;font-weight:800}
  &__subtitle{color:var(--muted);font-size:13px}
  &__header{display:grid;grid-template-columns:1fr;gap:12px}

  /* ========= FILTERS ========= */
  &__filters{
    display:flex; flex-wrap:wrap; gap:10px; align-items:center;
    &::after{content:""; flex-basis:100%;}
  }
  &__combo{flex:1 1 100%; min-width:220px; position:relative}
  &__dateFilter{flex:1 1 100%; min-width:200px; position:relative; display:flex; align-items:center}
  &__search{flex:1 1 100%; min-width:240px; position:relative}

  /* combobox UI */
  &__comboTrigger{
    width:100%;display:flex;align-items:center;justify-content:space-between;gap:12px;
    padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer;min-height:40px;
    &:hover{background:#f9fafb}
  }
  &__comboText{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  &__comboText.is-placeholder{color:var(--muted)}
  &__comboCaret{opacity:.7}

  &__comboPopup{
    position:absolute;left:0;right:0;top:calc(100% + 6px);
    background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 12px 30px rgba(2,6,23,.14);
    display:flex;flex-direction:column;overflow:hidden;z-index:40
  }
  &__comboSearch{position:relative;padding:8px}
  &__comboSearchIcon{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:14px}
  &__comboSearchInput{width:100%;padding:10px 12px 10px 36px;border:1px solid var(--border);border-radius:10px;font-size:14px;&:focus{outline:none;border-color:var(--primary)}}
  &__comboList{overflow:auto;min-height:120px;max-height:260px}
  &__comboList::-webkit-scrollbar{width:8px;height:8px}
  &__comboList::-webkit-scrollbar-thumb{background:#e2e8f0;border-radius:8px}
  &__comboEmpty{padding:12px;color:var(--muted);font-size:14px}
  &__comboOption{display:block;width:100%;text-align:left;padding:12px 14px;background:#fff;border:0;border-top:1px solid var(--border);cursor:pointer;font-size:14px;
    &:hover{background:#f9fafb}
    &:first-child{border-top:0}
  }
  &__comboPager{display:flex;align-items:center;justify-content:space-between;padding:8px;border-top:1px solid var(--border);gap:8px}
  &__pagerBtn{border:1px solid var(--border);background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;&:hover{background:#f9fafb}&:disabled{opacity:.6;cursor:default}}
  &__pagerInfo{color:var(--muted);font-size:13px}

  /* date + search inputs */
  &__dateIcon{position:absolute;left:10px;color:var(--muted);font-size:14px}
  &__dateInput{
    width:100%;padding:10px 12px 10px 32px;border:1px solid var(--border);border-radius:10px;font-size:14px;background:#fff;
    &:focus{outline:none;border-color:var(--primary)}
  }
  &__searchIcon{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:14px}
  &__searchInput{
    width:100%;padding:10px 12px 10px 32px;border:1px solid var(--border);border-radius:10px;font-size:14px;background:#fff;
    &:focus{outline:none;border-color:var(--primary)}
    &::placeholder{color:var(--muted);opacity:.9}
  }

  /* add button */
  &__btn{
    display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid transparent;cursor:pointer;transition:.18s;font-weight:700;font-size:14px;line-height:1;background:#fff;color:var(--text);
    svg{width:18px;height:18px}
    &:active{transform:translateY(1px)}
    &--primary{background:var(--primary);color:#111;&:hover{background:var(--primary-dark)}}
    &--secondary{border:1px solid var(--border);&:hover{background:#f9fafb}}
  }
  &__filters > .barberrecorda__btn--primary{
    height:44px;width:44px;padding:0;display:grid;place-items:center;border-radius:12px;
    margin-left:auto;
  }

  /* ======= TABLE ======= */
  &__tableWrap{overflow:auto;}
  &__table{width:100%;border-collapse:collapse;min-width:760px}
  &__table thead th{position:sticky;top:0;background:var(--primary);color:#111;padding:12px;font-size:14px;font-weight:700;text-align:left}
  &__table tbody td{padding:12px;border-bottom:1px solid var(--border);font-size:14px;vertical-align:top}
  &__table tbody tr:hover td{background:#f8fafc}
  &__empty{text-align:center;color:var(--muted);padding:18px 0}
  &__actionsCell{white-space:nowrap}

  /* badges */
  &__badge{display:inline-flex;align-items:center;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700;border:1px solid transparent;white-space:nowrap}
  &__badge--booked{background:rgba(59,130,246,.15);color:#3b82f6;border-color:rgba(59,130,246,.35)}
  &__badge--confirmed{background:rgba(99,102,241,.15);color:#6366f1;border-color:rgba(99,102,241,.35)}
  &__badge--completed{background:rgba(16,185,129,.15);color:#10b981;border-color:rgba(16,185,129,.35)}
  &__badge--canceled{background:rgba(239,68,68,.15);color:#ef4444;border-color:rgba(239,68,68,.35)}
  &__badge--no_show{background:rgba(234,179,8,.15);color:#eab308;border-color:rgba(234,179,8,.35)}

  /* pager */
  &__pager{display:flex;gap:10px;align-items:center;justify-content:center;margin-top:10px;flex-wrap:wrap}
  &__pageList{display:flex;gap:6px;list-style:none;margin:0;padding:0}
  &__pageBtn{border:1px solid var(--border);background:#fff;padding:8px 12px;border-radius:10px;cursor:pointer;&:hover{background:#f9fafb}&.is-active{background:var(--primary);border-color:var(--primary);color:#111}&:disabled{opacity:.6;cursor:default}}
  &__dots{color:var(--muted);align-self:flex-end;padding-bottom:2px}

  /* ======= MODAL ======= */
  &__overlay{
    position:fixed; inset:0; z-index:90;
    background:rgba(15,23,42,.55);
    backdrop-filter:saturate(140%) blur(2px);

    /* надёжное центрирование */
    display:flex; align-items:center; justify-content:center;

    padding:16px;
  }
  &__modal{
    width:min(760px,96vw);
    max-height:min(94vh, 820px);
    background:#fff; border-radius:14px;
    box-shadow:0 10px 40px rgba(0,0,0,.18);

    /* внутреннее устройство */
    display:grid; grid-template-rows:auto 1fr;
    overflow:hidden;
  }
  &__modalHeader{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
  &__modalTitle{margin:0;font-size:18px;font-weight:900}
  &__iconBtn{background:none;border:0;color:var(--muted);font-size:18px;cursor:pointer;&:hover{color:var(--text)}}

  &__form{display:grid;grid-template-rows:1fr auto;min-height:0}
  &__grid{padding:16px;overflow:auto;min-height:0;display:grid;grid-template-columns:1fr 1fr;gap:14px}
  &__field{display:grid;gap:6px}
  &__field--full{grid-column:1/-1}
  &__label{font-size:14px;font-weight:700;color:var(--muted)}
  &__req{color:#ef4444}
  &__input, &__textarea{
    width:100%;border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:14px;background:#fff;
    &:focus{outline:none;border-color:var(--primary)}
    &::placeholder{color:var(--muted);opacity:.85}
  }
  &__textarea{min-height:100px;resize:vertical}
  .is-invalid .barberrecorda__label{color:#dc2626}
  .is-invalid .barberrecorda__input{border-color:#dc2626}

  &__footer{border-top:1px solid var(--border);padding:12px 16px;display:flex;gap:10px;align-items:center;justify-content:flex-end;background:#fff}
  &__spacer{flex:1 1 auto}

  /* ========= RESPONSIVE LAYOUTS ========= */

  /* 768–1023px */
  @media (min-width:768px) and (max-width:1023.98px){
    &__filters{
      display:grid;
      grid-template-columns:1fr 1fr 220px 1fr auto;
      grid-template-areas:
        "c1 c2 c1x c2x c2x"
        "date search search plus plus";
      gap:12px;
      &::after{content:none;}
    }
    &__combo:nth-of-type(1){grid-area:c1}
    &__combo:nth-of-type(2){grid-area:c2}
    &__dateFilter{grid-area:date}
    &__search{grid-area:search}
    &__filters > .barberrecorda__btn--primary{grid-area:plus; justify-self:end}
  }

  /* ≥1024px */
  @media (min-width:1024px){
    &__filters{
      display:grid;
      grid-template-columns:1fr 1fr 240px 1fr auto;
      grid-template-areas:"c1 c2 date search plus";
      align-items:center; gap:12px;
      &::after{content:none;}
    }
    &__combo{flex:0 0 auto}
    &__combo:nth-of-type(1){grid-area:c1}
    &__combo:nth-of-type(2){grid-area:c2}
    &__dateFilter{grid-area:date}
    &__search{grid-area:search}
    &__filters > .barberrecorda__btn--primary{grid-area:plus; justify-self:end}
  }

  /* ≤720px (мобильная таблица-карточки) */
  @media (max-width:720px){
    &__grid{grid-template-columns:1fr}
    &__table{min-width:0}
    &__table thead{display:none}
    &__table, &__table tbody, &__table tr, &__table td{display:block;width:100%}
    &__table tr{border:1px solid var(--border);border-radius:12px;background:#fafafa;margin-bottom:10px;padding:10px 12px;box-shadow:$shadow}
    &__table tbody td{border:0;padding:8px 0;display:grid;grid-template-columns:120px 1fr;gap:8px}
    &__table tbody td:nth-child(1)::before{content:"Клиент";color:var(--muted);font-weight:700}
    &__table tbody td:nth-child(2)::before{content:"Мастер";color:var(--muted);font-weight:700}
    &__table tbody td:nth-child(3)::before{content:"Услуга";color:var(--muted);font-weight:700}
    &__table tbody td:nth-child(4)::before{content:"Цена";color:var(--muted);font-weight:700}
    &__table tbody td:nth-child(5)::before{content:"Статус";color:var(--muted);font-weight:700}
    &__table tbody td:nth-child(6)::before{content:"Действия";color:var(--muted);font-weight:700}
  }
  @media (max-width:360px){ &__table tbody td{grid-template-columns:96px 1fr} }
}

/* reduce motion */
@media (prefers-reduced-motion:reduce){
  .barberrecorda .barberrecorda__btn{transition:none !important}
}
